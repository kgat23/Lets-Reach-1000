<!DOCTYPE html>
<html>
<head>
  <title>Random Number Addition</title>
  <link href="styles.css" rel="stylesheet" type="text/css">
  <link href="utils.css" rel="stylesheet" type="text/css">
</head>
<body>
  <!-- <script>
    alert("Hello, welcome to Let's reach 1000. You have to keep on adding till you reach 1000. Press ok to start playing.")
  </script> -->
  <input type="text" id="num1" readonly> +
  <input type="text" id="num2" readonly> =
  <input type="text" id="result" readonly><br>
  <div class="numpad">
    <div class="row">
    <button onclick="appendNumber(7)">7</button>
    <button onclick="appendNumber(8)">8</button>
    <button onclick="appendNumber(9)">9</button>
    </div>
    <div class="row">
    <button onclick="appendNumber(4)">4</button>
    <button onclick="appendNumber(5)">5</button>
    <button onclick="appendNumber(6)">6</button>
    </div>
    <div class="row">
    <button onclick="appendNumber(1)">1</button>
    <button onclick="appendNumber(2)">2</button>
    <button onclick="appendNumber(3)">3</button>
    </div>
    <div class="row">
    <button onclick="appendNumber(0)">0</button>
    <button onclick="removeAnswer()">C</button>
    <button onclick="checkAnswer()">E</button>
    </div>
  </div>
  <div>Time: <span id="seconds">0</span></div>

  <script>

    // Generate random numbers for the first two text boxes
    document.getElementById('num1').value = getRandomNumber(1, 50);
    document.getElementById('num2').value = getRandomNumber(1, 50);

    var seconds = 0;
    var timer;

    function startTimer() {
      timer = setInterval(updateTimer, 1000);
    }

    function stopTimer() {
      clearInterval(timer);
    }

    function updateTimer() {
      seconds++;
      document.getElementById('seconds').textContent = seconds;
    }

    function appendNumber(number) {
      var resultInput = document.getElementById('result');
      resultInput.value += number;
    }

    // function checkAnswerLength() {
    //   var num1 = parseInt(document.getElementById('num1').value);
    //   var num2 = parseInt(document.getElementById('num2').value);
    //   var result = document.getElementById('result').value;

    //   if (result.length === (num1 + num2).toString().length) {
    //     checkAnswer();
    //   }
    // }

    function removeAnswer(){
      document.getElementById('result').value='';
    }

    function checkAnswer() {
      var num1 = parseInt(document.getElementById('num1').value);
      var num2 = parseInt(document.getElementById('num2').value);
      var result = parseInt(document.getElementById('result').value);

      if (result === num1 + num2) {
        document.getElementById('num1').value = num1 + num2;
        num1 = num1 + num2;

        if (num1 >= 950) {
          document.getElementById('num2').value = 1000 - num1;
        } else {
          document.getElementById('num2').value = getRandomNumber(1, 50);
        }

        if (result === 1000) {
          disableNumberButtons();
          stopTimer();
          console.log(seconds);
          alert("Congratulations, you have completed the game in "+seconds+" seconds. Press OK to play again");
          window.location.reload();
        }
      }
      else {
        document.getElementsByTagName('button')[0].disabled = true;
        disableNumberButtons();
        stopTimer();
        console.log("Game over!!");
        alert("Game over. Press OK to play again.");
        window.location.reload();
      }

      // Clear the third text box
      document.getElementById('result').value = '';
    }

    function disableNumberButtons() {
        var numberButtons = document.getElementsByTagName('button');

        for (var i = 0; i < numberButtons.length; i++) {
        var button = numberButtons[i];
        button.disabled = true;
        }
    }

    function getRandomNumber(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    window.onload = startTimer();
  </script>
</body>
</html>
